<!DOCTYPE html>
<html>
<head>
  <title>Write Data to File</title>
</head>
<body>
  <!-- <form id="myForm">
    <label for="inputData">Enter Data:</label>
    <input type="text" id="inputData">
  </form> -->

  <h1>Sign Up</h1>
  <p>Please fill in this form to create an account.</p>
  <hr>

  <label for="email"><b>Email</b></label>
  <input id="email" type="text" placeholder="Enter Email" name="email" required>

  <label for="psw"><b>Password</b></label>
  <input id="psw" type="password" placeholder="Enter Password" name="psw" required>

  <label for="psw-repeat"><b>Repeat Password</b></label>
  <input id="rpsw" type="password" placeholder="Repeat Password" name="psw-repeat" required>

  <label>
    <input type="checkbox" checked="checked" name="remember" style="margin-bottom:15px"> Remember me
  </label>

  <p>By creating an account you agree to our <a href="#" style="color:dodgerblue">Terms & Privacy</a>.</p>
  <button type="button" onclick="sendSignUpData()">sign up</button>

  <script>
    function sendSignUpData() {
      const formData = new FormData();
      const email = document.getElementById('email').value;
      const psw = document.getElementById('psw').value;
      const rpsw = document.getElementById('rpsw').value;
      formData.append("email", email)
      formData.append("psw", psw)
      formData.append("rpsw", rpsw)
      var test = {};
      test['email'] = email;

      const xhr = new XMLHttpRequest();
      xhr.open('POST', '/writeData', true);
      xhr.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');
      xhr.onreadystatechange = function() {
        if (xhr.readyState === 4) {
          alert(xhr.responseText);
        }
      };
      
      // xhr.send(`inputData=${test['email']}`);
      xhr.send(JSON.stringify({ "email": email, "psw": psw, "rpsw": rpsw }));
      // xhr.send(test)
    }
  </script>
</body>
</html>
