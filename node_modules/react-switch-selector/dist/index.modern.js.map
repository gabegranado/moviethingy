{"version":3,"file":"index.modern.js","sources":["../src/SwitchSelector.styled.ts","../src/defaultColors.ts","../src/SwitchSelector.tsx"],"sourcesContent":["import {createElement} from \"react\";\nimport {setup, styled} from \"goober\";\nimport {shouldForwardProp} from \"goober/should-forward-prop\";\nimport CSS from \"csstype\";\n\nconst propToOmitInDom = [\n    \"fontSize\",\n    \"fontColor\",\n    \"selectedFontColor\",\n    \"optionsAmount\",\n    \"optionBorderRadius\",\n    \"isRawText\",\n    \"selectedIndex\",\n    \"border\",\n    \"backgroundColor\",\n    \"selectedBackgroundColor\",\n    \"wrapperBorderRadius\",\n    \"selectionIndicatorMargin\",\n    \"disabled\"\n];\n\nsetup(\n    createElement,\n    undefined,\n    undefined,\n    shouldForwardProp((prop) => !propToOmitInDom.includes(prop))\n);\n\nexport type StylingPropsTypes = {\n    border: string | number;\n    backgroundColor: string;\n    selectedBackgroundColor: string;\n    wrapperBorderRadius: number | CSS.Property.BorderRadius<string>;\n    optionBorderRadius: number | CSS.Property.BorderRadius<string>;\n    fontSize: number;\n    fontColor: string;\n    selectedFontColor: string;\n    selectionIndicatorMargin: number;\n};\n\ninterface SwitchSelectorWrapperPropTypes\n    extends Pick<\n        StylingPropsTypes,\n        | \"border\"\n        | \"backgroundColor\"\n        | \"selectedBackgroundColor\"\n        | \"wrapperBorderRadius\"\n        | \"optionBorderRadius\"\n        | \"selectionIndicatorMargin\"\n    > {\n    selectedIndex: number;\n    optionsAmount: number;\n    disabled: boolean;\n}\n\nexport const SwitchSelectorWrapper = styled(\"div\")<SwitchSelectorWrapperPropTypes>`\n    display: flex;\n    border-radius: ${({wrapperBorderRadius}) =>\n        typeof wrapperBorderRadius === \"number\" ? `${wrapperBorderRadius}px` : wrapperBorderRadius};\n    border: ${(props) => props.border};\n    background: ${(props) => props.backgroundColor};\n    width: 100%;\n    height: 100%;\n    position: relative;\n    opacity: ${(props) => (props.disabled ? 0.7 : 1)};\n    overflow: hidden;\n\n    &::before {\n        top: 50%;\n        left: ${(props) => (props.selectedIndex / props.optionsAmount) * 100}%;\n        content: \"\";\n        position: absolute;\n        height: calc(100% - ${(props) => 2 * props.selectionIndicatorMargin}px);\n        width: calc(\n            ${(props) => (1 / props.optionsAmount) * 100}%${\" - \"}${(props) =>\n                    2 * props.selectionIndicatorMargin}px\n        );\n        border-radius: ${({optionBorderRadius}) =>\n            typeof optionBorderRadius === \"number\"\n                ? `${optionBorderRadius}px`\n                : optionBorderRadius};\n        border: ${(props) => props.selectionIndicatorMargin}px solid\n            ${(props) => props.backgroundColor};\n        background: ${(props) => props.selectedBackgroundColor};\n        transition: left 0.1s linear, background 0.1s linear;\n        transform: translateY(-50%);\n        z-index: 1;\n        box-sizing: content-box;\n    }\n`;\n\ninterface OptionItemPropsTypes extends Pick<StylingPropsTypes, \"optionBorderRadius\"> {\n    optionsAmount: number;\n}\n\nexport const OptionItem = styled(\"div\")<OptionItemPropsTypes>`\n    display: flex;\n    align-items: center;\n    height: 100%;\n    width: ${(props) => (1 / props.optionsAmount) * 100}%;\n    border-radius: ${({optionBorderRadius}) =>\n        typeof optionBorderRadius === \"number\" ? `${optionBorderRadius}px` : optionBorderRadius};\n`;\n\ninterface OptionItemLabelPropsTypes\n    extends Partial<Pick<StylingPropsTypes, \"fontSize\" | \"fontColor\" | \"selectedFontColor\">> {\n    isRawText: boolean;\n    selected: boolean;\n    disabled: boolean;\n}\n\nexport const OptionItemLabel = styled(\"label\")<OptionItemLabelPropsTypes>`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    height: 100%;\n    z-index: 2;\n    transition: color 0.1s linear;\n    cursor: ${(props) => (props.disabled ? \"not-allowed\" : \"pointer\")};\n    font-size: ${(props) => (props.isRawText ? props.fontSize + \"px\" : \"unset\")};\n    color: ${(props) =>\n        props.isRawText ? (props.selected ? props.selectedFontColor : props.fontColor) : \"unset\"};\n`;\n\nexport const OptionInput = styled(\"input\")`\n    width: 0;\n    height: 0;\n    opacity: 0;\n    z-index: -1;\n    position: absolute;\n    pointer-events: none;\n`;\n","export const defaultColors = {\n    backgroundColor: \"#ecf0f1\",\n    selectedBackgroundColor: \"#2ecc71\",\n    fontColor: \"#000\",\n    selectedFontColor: \"#fff\"\n};\n","import React, {FC, useState, useEffect} from \"react\";\nimport {\n    SwitchSelectorWrapper,\n    OptionItem,\n    OptionItemLabel,\n    OptionInput\n} from \"./SwitchSelector.styled\";\nimport {SwitchSelectorProps} from \"./SwitchSelector.props\";\nimport {defaultColors} from \"./defaultColors\";\n\nconst CLASS_NAMES_PREFIX = \"react-switch-selector\";\n\nconst SwitchSelector: FC<SwitchSelectorProps> = (props) => {\n    const {onChange = (): void => {}, options = [], initialSelectedIndex = 0} = props;\n    const canApplyInitialSelectedIndex = !!options[initialSelectedIndex];\n    const [selectedIndex, setSelectedIndex] = useState(\n        canApplyInitialSelectedIndex ? initialSelectedIndex : 0\n    );\n\n    const {\n        border = 0,\n        backgroundColor = defaultColors.backgroundColor,\n        selectedBackgroundColor = defaultColors.selectedBackgroundColor,\n        wrapperBorderRadius = 20,\n        optionBorderRadius = 18,\n        fontSize = 14,\n        fontColor = defaultColors.fontColor,\n        selectedFontColor = defaultColors.selectedFontColor,\n        selectionIndicatorMargin = 2,\n        forcedSelectedIndex,\n        disabled = false,\n        name\n    } = props;\n\n    useEffect(() => {\n        if (\n            forcedSelectedIndex !== undefined &&\n            !!options[forcedSelectedIndex] &&\n            forcedSelectedIndex !== selectedIndex\n        ) {\n            setSelectedIndex(forcedSelectedIndex);\n        }\n    }, [forcedSelectedIndex, options, selectedIndex]);\n\n    const handleOnClick = (index: number): void => {\n        if (!disabled && index !== selectedIndex) {\n            setSelectedIndex(index);\n            onChange(options[index].value);\n        }\n    };\n\n    const renderOptions = (): React.ReactElement[] => {\n        return options.map((option, index) => {\n            const isSelected = selectedIndex === index;\n            const optionId = `${name ?? \"rss\"}-option-${index}`;\n            const isRawText = typeof option.label === \"string\";\n\n            const labelRawTextProps = {\n                fontSize,\n                fontColor: option.fontColor || fontColor,\n                selectedFontColor: option.selectedFontColor || selectedFontColor\n            };\n\n            return (\n                <OptionItem\n                    key={optionId}\n                    optionsAmount={options.length}\n                    className={`${CLASS_NAMES_PREFIX}-option ${CLASS_NAMES_PREFIX}-option-${\n                        isSelected ? \"selected\" : \"unselected\"\n                    }`}\n                    optionBorderRadius={optionBorderRadius}\n                >\n                    <OptionItemLabel\n                        className={`${CLASS_NAMES_PREFIX}-option-label`}\n                        selected={isSelected}\n                        isRawText={isRawText}\n                        disabled={disabled}\n                        aria-disabled={disabled}\n                        htmlFor={optionId}\n                        {...(isRawText ? labelRawTextProps : {})}\n                    >\n                        <OptionInput\n                            type=\"radio\"\n                            id={optionId}\n                            name={name}\n                            onChange={(): void => handleOnClick(index)}\n                            checked={isSelected}\n                            aria-checked={isSelected}\n                            tabIndex={isSelected ? 0 : -1}\n                        />\n                        {option.label}\n                    </OptionItemLabel>\n                </OptionItem>\n            );\n        });\n    };\n\n    if (!options.length) return null;\n    return (\n        <SwitchSelectorWrapper\n            selectedIndex={selectedIndex}\n            optionsAmount={options.length}\n            className={`${CLASS_NAMES_PREFIX}-wrapper ${\n                disabled ? `${CLASS_NAMES_PREFIX}-disabled` : \"\"\n            }`}\n            border={border}\n            backgroundColor={backgroundColor}\n            selectedBackgroundColor={\n                options[selectedIndex]?.selectedBackgroundColor || selectedBackgroundColor\n            }\n            wrapperBorderRadius={wrapperBorderRadius}\n            optionBorderRadius={optionBorderRadius}\n            selectionIndicatorMargin={selectionIndicatorMargin}\n            disabled={disabled}\n            role={\"radiogroup\"}\n            aria-labelledby={name}\n        >\n            {renderOptions()}\n        </SwitchSelectorWrapper>\n    );\n};\n\nexport default SwitchSelector;\n"],"names":["propToOmitInDom","setup","createElement","undefined","shouldForwardProp","prop","includes","SwitchSelectorWrapper","styled","wrapperBorderRadius","props","border","backgroundColor","disabled","selectedIndex","optionsAmount","selectionIndicatorMargin","optionBorderRadius","selectedBackgroundColor","OptionItem","OptionItemLabel","isRawText","fontSize","selected","selectedFontColor","fontColor","OptionInput","defaultColors","onChange","options","initialSelectedIndex","canApplyInitialSelectedIndex","setSelectedIndex","useState","forcedSelectedIndex","name","useEffect","length","React","className","role","map","option","index","isSelected","optionId","label","key","htmlFor","type","id","value","handleOnClick","checked","tabIndex"],"mappings":"kZAKA,MAAMA,EAAkB,CACpB,WACA,YACA,oBACA,gBACA,qBACA,YACA,gBACA,SACA,kBACA,0BACA,sBACA,2BACA,YAGJC,EACIC,OACAC,OACAA,EACAC,EAAmBC,IAAUL,EAAgBM,SAASD,WA8B7CE,EAAwBC,EAAO,MAAPA;;qBAAH;cAAA;kBAAA;;;;eAAA;;;;;gBAAA;;;8BAAA;;cAAA,KAAA,IAAA;;yBAAA;kBAAA;cAAA;sBAAA;;;;;;GAEb,EAAEC,oBAAAA,KACgB,iBAAxBA,KAAsCA,MAA0BA,EAChEC,GAAUA,EAAMC,OACZD,GAAUA,EAAME,gBAInBF,GAAWA,EAAMG,SAAW,GAAM,EAKjCH,GAAWA,EAAMI,cAAgBJ,EAAMK,cAAiB,IAG1CL,GAAU,EAAIA,EAAMM,yBAEpCN,GAAW,EAAIA,EAAMK,cAAiB,IAAO,MAASL,GACjD,EAAIA,EAAMM,yBAEL,EAAEC,mBAAAA,KACe,iBAAvBA,KACEA,MACHA,EACCP,GAAUA,EAAMM,yBACpBN,GAAUA,EAAME,gBACRF,GAAUA,EAAMQ,yBAY1BC,EAAaX,EAAO,MAAPA;;;;aAAH;qBAAA;GAITE,GAAW,EAAIA,EAAMK,cAAiB,IAC/B,EAAEE,mBAAAA,KACe,iBAAvBA,KAAqCA,MAAyBA,GAUhEG,EAAkBZ,EAAO,QAAPA;;;;;;;;cAAH;iBAAA;aAAA;GAQbE,GAAWA,EAAMG,SAAW,cAAgB,UACzCH,GAAWA,EAAMW,UAAYX,EAAMY,SAAW,KAAO,QACzDZ,GACNA,EAAMW,UAAaX,EAAMa,SAAWb,EAAMc,kBAAoBd,EAAMe,UAAa,SAG5EC,EAAclB,EAAO,QAAPA;;;;;;;IC7HdmB,EAAgB,CACzBf,gBAAiB,UACjBM,wBAAyB,UACzBO,UAAW,OACXD,kBAAmB,uBCQ0Bd,UAC7C,MAAMkB,SAACA,EAAW,SAAZC,QAA4BA,EAAU,GAAtCC,qBAA0CA,EAAuB,GAAKpB,EACtEqB,IAAiCF,EAAQC,IACxChB,EAAekB,GAAoBC,EACtCF,EAA+BD,EAAuB,IAGpDnB,OACFA,EAAS,EADPC,gBAEFA,EAAkBe,EAAcf,gBAF9BM,wBAGFA,EAA0BS,EAAcT,wBAHtCT,oBAIFA,EAAsB,GAJpBQ,mBAKFA,EAAqB,GALnBK,SAMFA,EAAW,GANTG,UAOFA,EAAYE,EAAcF,UAPxBD,kBAQFA,EAAoBG,EAAcH,kBARhCR,yBASFA,EAA2B,EATzBkB,oBAUFA,EAVErB,SAWFA,GAAW,EAXTsB,KAYFA,GACAzB,EAiEJ,OA/DA0B,EAAU,UAEsBjC,IAAxB+B,GACEL,EAAQK,IACVA,IAAwBpB,GAExBkB,EAAiBE,IAEtB,CAACA,EAAqBL,EAASf,IAuD7Be,EAAQQ,OAETC,gBAAC/B,GACGO,cAAeA,EACfC,cAAec,EAAQQ,OACvBE,4CACI1B,mCAA8C,IAElDF,OAAQA,EACRC,gBAAiBA,EACjBM,kCACIW,EAAQf,aAAgBI,0BAA2BA,EAEvDT,oBAAqBA,EACrBQ,mBAAoBA,EACpBD,yBAA0BA,EAC1BH,SAAUA,EACV2B,KAAM,+BACWL,GA/DdN,EAAQY,IAAI,CAACC,EAAQC,KACxB,MAAMC,EAAa9B,IAAkB6B,EAC/BE,WAAcV,EAAAA,EAAQ,gBAAgBQ,IACtCtB,EAAoC,iBAAjBqB,EAAOI,MAQhC,OACIR,gBAACnB,GACG4B,IAAKF,EACL9B,cAAec,EAAQQ,OACvBE,wEACIK,EAAa,WAAa,cAE9B3B,mBAAoBA,GAEpBqB,gBAAClB,KACGmB,+CACAhB,SAAUqB,EACVvB,UAAWA,EACXR,SAAUA,kBACKA,EACfmC,QAASH,GACJxB,EAtBS,CACtBC,SAAAA,EACAG,UAAWiB,EAAOjB,WAAaA,EAC/BD,kBAAmBkB,EAAOlB,mBAAqBA,GAmBF,IAErCc,gBAACZ,GACGuB,KAAK,QACLC,GAAIL,EACJV,KAAMA,EACNP,SAAU,IAzCXe,CAAAA,IACd9B,GAAY8B,IAAU7B,IACvBkB,EAAiBW,GACjBf,EAASC,EAAQc,GAAOQ,SAsCcC,CAAcT,GACpCU,QAAST,iBACKA,EACdU,SAAUV,EAAa,GAAK,IAE/BF,EAAOI"}